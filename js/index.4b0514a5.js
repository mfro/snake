(function(e){function t(t){for(var r,o,u=t[0],c=t[1],l=t[2],d=0,s=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&s.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(s.length)s.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={index:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"1df7":function(e,t,n){"use strict";n("a21c")},"7a80":function(e,t,n){},"7ffe":function(e,t,n){"use strict";n("7a80")},a21c:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=n("a0ea"),i=Object(r["t"])("data-v-58b617f1");Object(r["m"])("data-v-58b617f1");var o={ref:"canvas"};Object(r["l"])();var u=i((function(e,t,n,a,u,c){var l=Object(r["o"])("v-text"),f=Object(r["o"])("v-flex"),d=Object(r["o"])("v-app");return Object(r["k"])(),Object(r["e"])(d,{"align-center":""},{default:i((function(){return[Object(r["h"])(f,{column:""},{default:i((function(){return[Object(r["h"])(f,{"justify-center":"",class:"score my-3"},{default:i((function(){return[Object(r["h"])(l,{title:"",style:{"font-size":"24px"}},{default:i((function(){return[Object(r["g"])(Object(r["r"])(a.score),1)]})),_:1})]})),_:1}),Object(r["h"])("canvas",o,null,512)]})),_:1})]})),_:1})})),c=(n("a623"),n("fb6a"),n("b85c")),l=(n("4ec9"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),37),f=38,d=40,s=39,v=82,y=new Set,p=new Map;function h(e,t){var n=p.get(e);n||p.set(e,n=[]),n.push(t)}function b(e,t){if(!e)throw new Error(t)}window.addEventListener("keydown",(function(e){if(!y.has(e.keyCode)){y.add(e.keyCode);var t=p.get(e.keyCode);if(t){var n,r=Object(c["a"])(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a()}}catch(i){r.e(i)}finally{r.f()}}}})),window.addEventListener("keyup",(function(e){y.delete(e.keyCode)}));var w=n("d4ec"),_=n("bee2"),g=function(){function e(t,n){Object(w["a"])(this,e),this.x=t,this.y=n}return Object(_["a"])(e,[{key:"len",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"dir",get:function(){return Math.atan2(this.y,this.x)}}],[{key:"norm",value:function(t){return e.polar(1,t.dir)}},{key:"scale",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"eq",value:function(e,t){return e.x==t.x&&e.y==t.y}},{key:"delta",value:function(t,n){var r=e.dot(t,n),a=Math.acos(r/t.len/n.len);return t.y*n.x>t.x*n.y?-a:a}},{key:"polar",value:function(t,n){return new e(Math.cos(n)*t,Math.sin(n)*t)}}]),e}();g.zero=new g(0,0);var O={id:-1,value:new g(0,-1)},j={id:1,value:new g(0,1)},x={id:-2,value:new g(-1,0)},k={id:2,value:new g(1,0)};function m(e,t){var n;do{var r=Math.floor(Math.random()*e.field_size.x),a=Math.floor(Math.random()*e.field_size.y);n=new g(r,a)}while(!t.tail.every((function(e){return!g.eq(e,n)})));return n}function q(e){return{tail:e.initial_tail.slice(),facing:e.initial_facing,input_queue:[],food:null,step_delay:e.step_delay}}function M(e,t){var n=10,r={field_size:new g(50,40),step_delay:1,initial_tail:[new g(0,4),new g(1,4),new g(2,4),new g(3,4),new g(4,4)],initial_facing:k};e.width=r.field_size.x*n-1,e.height=r.field_size.y*n-1,e.style.width="".concat(e.width,"px"),e.style.height="".concat(e.height,"px");var a=e.getContext("2d");b(null!=a,"no context");var i=q(r);i.step_delay=200,i.food=m(r,i);var o=!1;function u(){var e=i.facing;while(i.input_queue.length>0){var n=i.input_queue.shift();if(n!=i.facing&&n.id!=-i.facing.id){e=n;break}}i.facing=e;var a=g.add(i.tail[i.tail.length-1],i.facing.value);i.food&&g.eq(a,i.food)?(i.food=m(r,i),t.value+=1):i.tail.shift();var o=a.x<0||a.x>=r.field_size.x||a.y<0||a.y>=r.field_size.y||!i.tail.every((function(e){return!g.eq(e,a)}));return!!o||(i.tail.push(a),!1)}function y(e){a.fillStyle="black",a.fillRect(e.x*n,e.y*n,n-1,n-1)}h(f,(function(){i.input_queue.push(O),console.log("UP")})),h(d,(function(){i.input_queue.push(j),console.log("DOWN")})),h(l,(function(){i.input_queue.push(x),console.log("LEFT")})),h(s,(function(){i.input_queue.push(k),console.log("RIGHT")})),h(v,(function(){o=!1,i=q(r),i.step_delay=200,i.food=m(r,i),t.value=0}));var p=0;function w(t){var n=p?t-p:0;p=t,o||(i.step_delay-=n,i.step_delay<0&&(i.step_delay+=1e3/30,o=u())),a.clearRect(0,0,e.width,e.height);var r,l=Object(c["a"])(i.tail);try{for(l.s();!(r=l.n()).done;){var f=r.value;y(f)}}catch(d){l.e(d)}finally{l.f()}i.food&&y(i.food),requestAnimationFrame(w)}requestAnimationFrame(w)}var z={name:"snake",setup:function(){var e=Object(r["q"])(0),t=Object(r["q"])();return Object(r["j"])((function(){M(t.value,e)})),{canvas:t,score:e}}};n("1df7"),n("7ffe");z.render=u,z.__scopeId="data-v-58b617f1";var P=z;Object(r["d"])(P).use(a["a"]).mount("#app")}});
//# sourceMappingURL=index.4b0514a5.js.map